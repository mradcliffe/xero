language: php

php:
  - 5.5
  - 5.6

sudo: false

env:
  global:
    - PATH="$PATH:$HOME/.composer/vendor/bin"
    - TESTDIR=$(pwd)
    - DRUPAL_TI_MODULE_NAME="xero"
    - DRUPAL_TI_PHPUNIT_CORE_SRC_DIRECTORY="./tests/src"
    - DRUPAL_TI_ENVIRONMENT="drupal-8"

  matrix:
    - DRUPAL_TI_RUNNERS="phpunit-core"

before_install:
  # - composer global require drush/drush:dev-master
  - composer self-update
  - composer global require "lionsad/drupal_ti:1.*"
  - drupal-ti before_install

install:
  - drupal-ti install

before_script:
  - drupal-ti --include scripts/composer-manager.sh
  - drupal-ti before_script
  - DRUPAL_TI_PHPUNIT_ARGS="-c $DRUPAL_TI_DRUPAL_DIR/modules/xero/phpunit.xml --coverage-text=$TRAVIS_BUILD_DIR/coverage.txt"

script:
  - drupal-ti script

after_script:
  - drupal-ti after_script
  # Print out coverage report.
  - head $TRAVIS_BUILD_DIR/coverage.txt

notifications:
  email: false
